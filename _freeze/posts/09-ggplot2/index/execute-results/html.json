{
  "hash": "494591576e75098068dca7c439123d6f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Things you may or you may not know in ggplot2\"\nsubtitle: \"A rare case study — Some investigations I made\"\ndate: \"2025-12-01\"\nimage: \"image.png\"\ncategories: [R, ggplot2, data-science, visualization, tidyverse, viz, programming]\ndescription: \"Here are some things I enumerated — things you may or may not know already\"\nformat:\n    html:\n        toc: true\n        toc-float: true\n        toc-depth: 3\n        number-sections: true\n        code-fold: false\n        code-tools: false\n        theme: default\n        highlight-style: tango\n        fig-width: 10\n        fig-height: 6\n        fig-cap-location: bottom\n        code-annotations: hover\nexecute:\n    echo: true\n    warning: false\n    message: false\nfilters:\n    - social-share\n    - collapse-output\nshare:\n    permalink: \"https://joshuamarie.com/posts/09-ggplot2\"\n    description: \"Things you may or you may not know in ggplot2 — Joshua Marie\"\n    twitter: true\n    facebook: true\n    reddit: true\n    stumble: true\n    tumblr: true\n    linkedin: true\n    email: true\n    mastodon: true\n    bsky: true\n    location: \"before-body\"\nengine: knitr\n---\n\n# Brief Introduction\n\nThe `{ggplot2}` package is now over 18 years old (released way back in 2007) and has 2.2 million downloads per month, based on cranlogs. Thank you Hadley Wickham and co. for adapting \"The Grammar of Graphics\" by Leland Wilkinson into R programming language. \n\nThe things to be enumerated here are some brand new features and some hidden in plain sight. Here are my compilations of things you may or you may not know in `{ggplot2}`. But first, let us load the package through `{box}`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbox::use(\n    ggplot2[...]\n)\n```\n:::\n\n\n# 1. Starting from 4.0.0, S7 is the new imported OO system\n\nThe 4.0.0 release of `{ggplot2}` is now on CRAN few months ago (followed by 4.0.1 — published 18 days ago on November 14, 2025). This release introduces several significant updates, including a major internal shift: `{ggplot2}` now imports the S7 object-oriented system, a new OO system, developed by the Object-Oriented Programming Working Group, R Consortium.\n\nWith this transition, several core internal objects, such as `ggplot()` and `layer()`, are now implemented using S7. However, the public-facing API remains largely S3-based, meaning that most users will experience the package exactly as before, with no changes required in existing code. \n\n\n::: {.cell output-fold='true' output-summary='Check out its class'}\n\n```{.r .cell-code}\nclass({\n    ggplot(mtcars, aes(x = mpg, y = hp)) +\n        geom_point()\n})\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"ggplot2::ggplot\" \"ggplot\"          \"ggplot2::gg\"     \"S7_object\"      \n[5] \"gg\"             \n```\n\n\n:::\n:::\n\n\nIf you’re upgrading old projects, expect a few things to break (especially if you relied on internal structure). Lock your version with `{renv}` or `{groundhog}` until you’re ready.\n\nThis move to S7 represents the most substantial internal redesign of ggplot2 since the introduction of `ggproto` in 2015.\n\n# 2. It has its own OO system: ggproto\n\nEven with the latest 4.0.0 release, the actual layers, scales, coords, etc. are still held by `ggproto` objects. This is what makes ggplot2 so extensible. This OO system allows reference semantics and inheritance method — a classic OO programming scheme.\n\n\n::: {.cell output-fold='true' output-summary='Check out its class'}\n\n```{.r .cell-code}\nclass(ggplot2::GeomPoint)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"GeomPoint\" \"Geom\"      \"ggproto\"   \"gg\"       \n```\n\n\n:::\n:::\n\n\nWanna know how `geom_smooth()` secretly uses loess or gam? Just look at [`ggplot2:::StatSmooth$compute_group`](https://github.com/tidyverse/ggplot2/blob/bc605b69de8f0e3e2fb2e510a9c398b5a948146f/R/stat-smooth.R).\n\n# 3. It has 5 ggplot2-based interactive viz\n\nThere are R packages that makes `{ggplot2}` interactive, at least several:  \n\n| Package       | Strength                                      | Fidelity to static ggplot | Learning curve (verdict) |\n|---------------|-----------------------------------------------|----------------------------|----------------|\n| plotly      | Dynamic and one-liner using `ggplotly()`        | Medium (some features lost) | Low (1 star / easy to use) |\n| ggiraph      | Giving full control over tooltip / hover / click  |  Perfect                  | Very High (4 stars / difficult for non-native ggplot2 users) |\n| ggiraphExtra | Shiny-integrated version of ggiraph           | High                  | Fairly Low (2 stars / quick interactive) |\n| gginteractive| Minimal code changes, HTMLwidget backend      | High                       | Fairly Low (2 stars / not actively maintained) |\n| ggvis (now a legacy)| Once the future, now archived    | NULL (I don't use it)            | NULL (I don't use it) |\n| vegafacet (2025) | Vega-Lite                                | Fairly Low (not even ggplot2, but close) | Seriously high (5 stars / still new) |\n\nA quick showcase of `{ggiraph}`:\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Click to see the code\"}\nbox::use(\n    ggiraph[geom_point_interactive, girafe, opts_hover, opts_hover_inv], \n    tibble[rownames_to_column], \n    glue[glue]\n)\n\np = \n    mtcars |> \n    rownames_to_column(var = \"car\") |> \n    ggplot(aes(wt, mpg, color = factor(cyl))) +\n    geom_point_interactive(\n        aes(\n            tooltip = glue(\"{car} (wt: {wt}; mpg: {mpg})\"), \n            data_id = car\n        ), \n        size = 4\n    ) +\n    theme_minimal(base_size = 14)\n\ngirafe(\n    ggobj = p,\n    width_svg = 10,\n    height_svg = 6,\n    options = list(\n        opts_hover(css = \"fill:yellow;stroke:black;stroke-width:2;cursor:pointer;\"),\n        opts_hover_inv(css = \"opacity:0.3;\")\n    )\n)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"girafe html-widget html-fill-item\" id=\"htmlwidget-2ae48c6492a0fb7ffaf3\" style=\"width:100%;height:390px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-2ae48c6492a0fb7ffaf3\">{\"x\":{\"html\":\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' class='ggiraph-svg' role='graphics-document' id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3' viewBox='0 0 720 432'>\\n <defs id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_defs'>\\n  <clipPath id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_c1'>\\n   <rect x='0' y='0' width='720' height='432'/>\\n  <\\/clipPath>\\n  <clipPath id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_c2'>\\n   <rect x='42.15' y='6.97' width='581.56' height='384.95'/>\\n  <\\/clipPath>\\n <\\/defs>\\n <g id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_rootg' class='ggiraph-svg-rootg'>\\n  <g clip-path='url(#svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_c1)'>\\n   <rect x='0' y='0' width='720' height='432' fill='#FFFFFF' fill-opacity='1' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.75' stroke-linejoin='round' stroke-linecap='round' class='ggiraph-svg-bg'/>\\n   <rect x='0' y='0' width='720' height='432' fill='#FFFFFF' fill-opacity='1' stroke='none'/>\\n  <\\/g>\\n  <g clip-path='url(#svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_c2)'>\\n   <polyline points='42.15,343.16 623.71,343.16' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='0.68' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='42.15,268.70 623.71,268.70' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='0.68' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='42.15,194.24 623.71,194.24' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='0.68' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='42.15,119.78 623.71,119.78' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='0.68' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='42.15,45.32 623.71,45.32' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='0.68' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='66.82,391.93 66.82,6.97' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='0.68' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='202.00,391.93 202.00,6.97' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='0.68' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='337.18,391.93 337.18,6.97' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='0.68' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='472.37,391.93 472.37,6.97' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='0.68' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='607.55,391.93 607.55,6.97' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='0.68' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='42.15,380.39 623.71,380.39' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='1.36' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='42.15,305.93 623.71,305.93' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='1.36' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='42.15,231.47 623.71,231.47' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='1.36' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='42.15,157.01 623.71,157.01' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='1.36' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='42.15,82.55 623.71,82.55' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='1.36' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='42.15,8.09 623.71,8.09' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='1.36' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='134.41,391.93 134.41,6.97' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='1.36' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='269.59,391.93 269.59,6.97' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='1.36' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='404.78,391.93 404.78,6.97' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='1.36' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <polyline points='539.96,391.93 539.96,6.97' fill='none' stroke='#EBEBEB' stroke-opacity='1' stroke-width='1.36' stroke-linejoin='round' stroke-linecap='butt'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e1' cx='218.23' cy='216.58' r='3.54pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Mazda RX4 (wt: 2.62; mpg: 21)' data-id='Mazda RX4'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e2' cx='252.7' cy='216.58' r='3.54pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Mazda RX4 Wag (wt: 2.875; mpg: 21)' data-id='Mazda RX4 Wag'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e3' cx='177.67' cy='189.77' r='3.54pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Datsun 710 (wt: 2.32; mpg: 22.8)' data-id='Datsun 710'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e4' cx='298.66' cy='210.62' r='3.54pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Hornet 4 Drive (wt: 3.215; mpg: 21.4)' data-id='Hornet 4 Drive'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e5' cx='329.07' cy='250.83' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Hornet Sportabout (wt: 3.44; mpg: 18.7)' data-id='Hornet Sportabout'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e6' cx='331.78' cy='259.76' r='3.54pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Valiant (wt: 3.46; mpg: 18.1)' data-id='Valiant'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e7' cx='346.65' cy='316.35' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Duster 360 (wt: 3.57; mpg: 14.3)' data-id='Duster 360'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e8' cx='295.28' cy='165.94' r='3.54pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Merc 240D (wt: 3.19; mpg: 24.4)' data-id='Merc 240D'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e9' cx='289.87' cy='189.77' r='3.54pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Merc 230 (wt: 3.15; mpg: 22.8)' data-id='Merc 230'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e10' cx='329.07' cy='243.38' r='3.54pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Merc 280 (wt: 3.44; mpg: 19.2)' data-id='Merc 280'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e11' cx='329.07' cy='264.23' r='3.54pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Merc 280C (wt: 3.44; mpg: 17.8)' data-id='Merc 280C'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e12' cx='414.24' cy='285.08' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Merc 450SE (wt: 4.07; mpg: 16.4)' data-id='Merc 450SE'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e13' cx='368.28' cy='271.68' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Merc 450SL (wt: 3.73; mpg: 17.3)' data-id='Merc 450SL'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e14' cx='375.04' cy='302.95' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Merc 450SLC (wt: 3.78; mpg: 15.2)' data-id='Merc 450SLC'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e15' cx='573.75' cy='374.43' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Cadillac Fleetwood (wt: 5.25; mpg: 10.4)' data-id='Cadillac Fleetwood'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e16' cx='597.27' cy='374.43' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Lincoln Continental (wt: 5.424; mpg: 10.4)' data-id='Lincoln Continental'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e17' cx='586.59' cy='310.39' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Chrysler Imperial (wt: 5.345; mpg: 14.7)' data-id='Chrysler Imperial'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e18' cx='161.45' cy='46.81' r='3.54pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Fiat 128 (wt: 2.2; mpg: 32.4)' data-id='Fiat 128'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e19' cx='82.37' cy='76.59' r='3.54pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Honda Civic (wt: 1.615; mpg: 30.4)' data-id='Honda Civic'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e20' cx='112.11' cy='24.47' r='3.54pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Toyota Corolla (wt: 1.835; mpg: 33.9)' data-id='Toyota Corolla'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e21' cx='197.27' cy='209.13' r='3.54pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Toyota Corona (wt: 2.465; mpg: 21.5)' data-id='Toyota Corona'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e22' cx='339.89' cy='298.48' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Dodge Challenger (wt: 3.52; mpg: 15.5)' data-id='Dodge Challenger'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e23' cx='328.4' cy='302.95' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='AMC Javelin (wt: 3.435; mpg: 15.2)' data-id='AMC Javelin'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e24' cx='383.15' cy='331.24' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Camaro Z28 (wt: 3.84; mpg: 13.3)' data-id='Camaro Z28'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e25' cx='383.82' cy='243.38' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Pontiac Firebird (wt: 3.845; mpg: 19.2)' data-id='Pontiac Firebird'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e26' cx='125.63' cy='122.76' r='3.54pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Fiat X1-9 (wt: 1.935; mpg: 27.3)' data-id='Fiat X1-9'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e27' cx='153.34' cy='142.12' r='3.54pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Porsche 914-2 (wt: 2.14; mpg: 26)' data-id='Porsche 914-2'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e28' cx='68.58' cy='76.59' r='3.54pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Lotus Europa (wt: 1.513; mpg: 30.4)' data-id='Lotus Europa'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e29' cx='292.58' cy='294.01' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Ford Pantera L (wt: 3.17; mpg: 15.8)' data-id='Ford Pantera L'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e30' cx='238.5' cy='235.94' r='3.54pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Ferrari Dino (wt: 2.77; mpg: 19.7)' data-id='Ferrari Dino'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e31' cx='346.65' cy='305.93' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Maserati Bora (wt: 3.57; mpg: 15)' data-id='Maserati Bora'/>\\n   <circle id='svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_e32' cx='239.85' cy='210.62' r='3.54pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round' title='Volvo 142E (wt: 2.78; mpg: 21.4)' data-id='Volvo 142E'/>\\n  <\\/g>\\n  <g clip-path='url(#svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3_c1)'>\\n   <text x='23.43' y='384.39' font-size='8.4pt' font-family='Arial' fill='#4D4D4D' fill-opacity='1'>10<\\/text>\\n   <text x='23.43' y='309.93' font-size='8.4pt' font-family='Arial' fill='#4D4D4D' fill-opacity='1'>15<\\/text>\\n   <text x='23.43' y='235.47' font-size='8.4pt' font-family='Arial' fill='#4D4D4D' fill-opacity='1'>20<\\/text>\\n   <text x='23.43' y='161.02' font-size='8.4pt' font-family='Arial' fill='#4D4D4D' fill-opacity='1'>25<\\/text>\\n   <text x='23.43' y='86.56' font-size='8.4pt' font-family='Arial' fill='#4D4D4D' fill-opacity='1'>30<\\/text>\\n   <text x='23.43' y='12.1' font-size='8.4pt' font-family='Arial' fill='#4D4D4D' fill-opacity='1'>35<\\/text>\\n   <text x='131.3' y='406.22' font-size='8.4pt' font-family='Arial' fill='#4D4D4D' fill-opacity='1'>2<\\/text>\\n   <text x='266.48' y='406.22' font-size='8.4pt' font-family='Arial' fill='#4D4D4D' fill-opacity='1'>3<\\/text>\\n   <text x='401.67' y='406.22' font-size='8.4pt' font-family='Arial' fill='#4D4D4D' fill-opacity='1'>4<\\/text>\\n   <text x='536.85' y='406.22' font-size='8.4pt' font-family='Arial' fill='#4D4D4D' fill-opacity='1'>5<\\/text>\\n   <text x='325.93' y='422.08' font-size='10.5pt' font-family='Arial'>wt<\\/text>\\n   <text transform='translate(17.00,213.06) rotate(-90.00)' font-size='10.5pt' font-family='Arial'>mpg<\\/text>\\n   <text x='644.63' y='175.05' font-size='10.5pt' font-family='Arial'>factor(cyl)<\\/text>\\n   <circle cx='653.27' cy='192.14' r='3.54pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round'/>\\n   <circle cx='653.27' cy='209.42' r='3.54pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round'/>\\n   <circle cx='653.27' cy='226.7' r='3.54pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.9' stroke-linejoin='round' stroke-linecap='round'/>\\n   <text x='668.88' y='196.15' font-size='8.4pt' font-family='Arial'>4<\\/text>\\n   <text x='668.88' y='213.43' font-size='8.4pt' font-family='Arial'>6<\\/text>\\n   <text x='668.88' y='230.71' font-size='8.4pt' font-family='Arial'>8<\\/text>\\n  <\\/g>\\n <\\/g>\\n<\\/svg>\",\"js\":null,\"uid\":\"svg_d5558f8e_c9de_4afa_b9db_e79df4d22ac3\",\"ratio\":1.666666666666667,\"settings\":{\"tooltip\":{\"css\":\".tooltip_SVGID_ { padding:5px;background:black;color:white;border-radius:2px;text-align:left; ; position:absolute;pointer-events:none;z-index:999;}\",\"placement\":\"doc\",\"opacity\":0.9,\"offx\":10,\"offy\":10,\"use_cursor_pos\":true,\"use_fill\":false,\"use_stroke\":false,\"delay_over\":200,\"delay_out\":500},\"hover\":{\"css\":\".hover_data_SVGID_ { fill:yellow;stroke:black;stroke-width:2;cursor:pointer; }\",\"reactive\":false,\"nearest_distance\":null},\"hover_inv\":{\"css\":\".hover_inv_SVGID_ { opacity:0.3; }\"},\"hover_key\":{\"css\":\".hover_key_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\\ntext.hover_key_SVGID_ { stroke:none;fill:orange; }\\ncircle.hover_key_SVGID_ { fill:orange;stroke:black; }\\nline.hover_key_SVGID_, polyline.hover_key_SVGID_ { fill:none;stroke:orange; }\\nrect.hover_key_SVGID_, polygon.hover_key_SVGID_, path.hover_key_SVGID_ { fill:orange;stroke:none; }\\nimage.hover_key_SVGID_ { stroke:orange; }\",\"reactive\":true},\"hover_theme\":{\"css\":\".hover_theme_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\\ntext.hover_theme_SVGID_ { stroke:none;fill:orange; }\\ncircle.hover_theme_SVGID_ { fill:orange;stroke:black; }\\nline.hover_theme_SVGID_, polyline.hover_theme_SVGID_ { fill:none;stroke:orange; }\\nrect.hover_theme_SVGID_, polygon.hover_theme_SVGID_, path.hover_theme_SVGID_ { fill:orange;stroke:none; }\\nimage.hover_theme_SVGID_ { stroke:orange; }\",\"reactive\":true},\"select\":{\"css\":\".select_data_SVGID_ { fill:red;stroke:black;cursor:pointer; }\\ntext.select_data_SVGID_ { stroke:none;fill:red; }\\ncircle.select_data_SVGID_ { fill:red;stroke:black; }\\nline.select_data_SVGID_, polyline.select_data_SVGID_ { fill:none;stroke:red; }\\nrect.select_data_SVGID_, polygon.select_data_SVGID_, path.select_data_SVGID_ { fill:red;stroke:none; }\\nimage.select_data_SVGID_ { stroke:red; }\",\"type\":\"multiple\",\"only_shiny\":true,\"selected\":[]},\"select_inv\":{\"css\":\"\"},\"select_key\":{\"css\":\".select_key_SVGID_ { fill:red;stroke:black;cursor:pointer; }\\ntext.select_key_SVGID_ { stroke:none;fill:red; }\\ncircle.select_key_SVGID_ { fill:red;stroke:black; }\\nline.select_key_SVGID_, polyline.select_key_SVGID_ { fill:none;stroke:red; }\\nrect.select_key_SVGID_, polygon.select_key_SVGID_, path.select_key_SVGID_ { fill:red;stroke:none; }\\nimage.select_key_SVGID_ { stroke:red; }\",\"type\":\"single\",\"only_shiny\":true,\"selected\":[]},\"select_theme\":{\"css\":\".select_theme_SVGID_ { fill:red;stroke:black;cursor:pointer; }\\ntext.select_theme_SVGID_ { stroke:none;fill:red; }\\ncircle.select_theme_SVGID_ { fill:red;stroke:black; }\\nline.select_theme_SVGID_, polyline.select_theme_SVGID_ { fill:none;stroke:red; }\\nrect.select_theme_SVGID_, polygon.select_theme_SVGID_, path.select_theme_SVGID_ { fill:red;stroke:none; }\\nimage.select_theme_SVGID_ { stroke:red; }\",\"type\":\"single\",\"only_shiny\":true,\"selected\":[]},\"zoom\":{\"min\":1,\"max\":1,\"duration\":300},\"toolbar\":{\"position\":\"topright\",\"pngname\":\"diagram\",\"tooltips\":null,\"fixed\":false,\"hidden\":[],\"delay_over\":200,\"delay_out\":500},\"sizing\":{\"rescale\":true,\"width\":1}}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n# 4. Customized fonts\n\nFont styles to be used in your plot is not limited to the fonts you had in your system — this includes the font found in the web, such as Google fonts. \n\nThanks to `{sysfonts}`, you can do:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsysfonts::font_add_google(\"Lobster\", \"lobster\")\nsysfonts::font_add_google(\"Roboto Condensed\", \"roboto\")\nshowtext::showtext_auto()\n```\n:::\n\n\nThen use it as the base font family of the whole plot:\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Click to see the code\"}\nggplot(mtcars, aes(mpg, hp)) +\n    geom_point(color = \"#C70039\", size = 3) +\n    labs(\n        title = \"This title is in Lobster font\",\n        subtitle = \"And the rest of the text too if you want\"\n    ) +\n    theme_minimal(base_size = 20, base_family = \"lobster\") +\n    theme(\n        plot.subtitle = element_text(color = \"grey40\", size = 13),\n        panel.grid.minor = element_blank(),\n        panel.grid.major = element_line(color = \"grey90\", linewidth = 0.3),\n        axis.title = element_text(face = \"bold\"),\n        axis.text = element_text(color = \"grey30\")\n    )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n# 5. ggplot2 works perfectly without a data frame\n\nR's metaprogramming and its environment semantics is so handy but sometimes quirky: they're so noble in data analysis and statistical modelling, but sometimes they're so hard to predict. In many cases when it comes to working with data in R, NSE or the non-standard evaluation is used and one of the core features in `{tidyverse}`. \n\nMany tutorials and documentations show how to use `{ggplot2}` with data frames, but do you know that it is still fine to use `{ggplot2}` without providing a data frame?\n\nThe demo:\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Click to see the code\"}\nset.seed(123)\nx = rnorm(100)\ny = rnorm(100) + 0.5 * x\n\nggplot() + # This is always required! No need to put a data frame\n    aes(x, y) + \n    geom_point(\n        color = \"#002455\",\n        size = 2.5,\n        alpha = 0.7,\n        shape = 16\n    ) +\n    geom_smooth(\n        method = \"lm\", \n        se = TRUE,  \n        color = \"#E7DEAF\",\n        fill = \"#E7DEAF\",\n        alpha = 0.2,\n        linewidth = 1.2\n    ) +\n    labs(\n        x = \"X-axis\",\n        y = \"Y-axis\",\n        title = \"Scatter Plot with Linear Regression\",\n        subtitle = paste0(\n            \"Pearson's r = \", round(cor(x, y), 3), \", \", \n            \"n = \", length(x)\n        )\n    ) + \n    scale_x_continuous(\n        breaks = seq(-3, 3, 1),\n        limits = c(-3, 3)\n    ) +\n    scale_y_continuous(\n        breaks = seq(-3, 3, 1)\n    ) +\n    theme_minimal(base_size = 12, base_family = \"lobster\") +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        plot.subtitle = element_text(color = \"grey40\", size = 10),\n        panel.grid.minor = element_blank(),\n        panel.grid.major = element_line(color = \"grey90\", linewidth = 0.3),\n        axis.title = element_text(face = \"bold\"),\n        axis.text = element_text(color = \"grey30\"),\n        plot.margin = margin(15, 15, 15, 15)\n    )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n\nAlthough I still recommend providing a data frame since that's how `{ggplot2}` is designed to be used — especially in many tutorials and documentations. \n\n# 6. The art of delay\n\nYou may haven't encounter this but there are 3 particular functions that manipulates aesthetic evaluation: \n\n1.  `stage()` lets you delay the evaluation of aesthetics until the plot is drawn. \n\n    ::: {.callout-tip title=\"Simple demo\" collapse=\"true\"}\n    \n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    ggplot(mpg, aes(x = displ)) +\n        geom_bar(\n            aes(\n                y = stage(\n                    start = hwy,             \n                    after_scale = y * 2      \n                )\n            ),\n            stat = \"identity\",\n            fill = \"#4A90E2\",\n            alpha = 0.7\n        ) +\n        labs(\n            title = \"Using stage() to modify values after scaling\",\n            subtitle = \"Y-axis values are doubled after ggplot2's internal scaling\",\n            x = \"Engine Displacement (L)\",\n            y = \"Highway MPG (scaled × 2)\"\n        ) +\n        theme_minimal(base_family = \"roboto\", base_size = 13) +\n        theme(\n            plot.title = element_text(face = \"bold\"),\n            panel.grid.minor = element_blank()\n        )\n    ```\n    \n    ::: {.cell-output-display}\n    ![](index_files/figure-html/unnamed-chunk-8-1.png){width=960}\n    :::\n    :::\n\n    \n    :::\n\n2.  `after_stat()` enables you to modify aesthetics based on computed statistics after they have been calculated.\n\n    ::: {.callout-tip title=\"Simple demo\" collapse=\"true\"}\n    \n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    ggplot(mpg, aes(x = hwy)) +\n        geom_histogram(\n            aes(\n                y = after_stat(density),  \n                fill = after_stat(count)  \n            ),\n            bins = 30,\n            color = \"white\",\n            linewidth = 0.2\n        ) +\n        scale_fill_viridis_c(option = \"plasma\") +\n        labs(\n            title = \"Histogram with after_stat()\",\n            subtitle = \"Y-axis shows density, fill color shows count\",\n            x = \"Highway MPG\",\n            y = \"Density\",\n            fill = \"Count\"\n        ) +\n        theme_minimal(base_size = 14, base_family = \"roboto\") +\n        theme(\n            plot.title = element_text(face = \"bold\"),\n            legend.position = \"right\"\n        )\n    ```\n    \n    ::: {.cell-output-display}\n    ![](index_files/figure-html/unnamed-chunk-9-1.png){width=960}\n    :::\n    :::\n\n    \n    :::\n\n3.  `after_scale()` allows you to modify aesthetics after they have been scaled but before they are rendered.\n\n    ::: {.callout-tip title=\"Simple demo\" collapse=\"true\"}\n    \n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    ggplot(mtcars, aes(x = wt, y = mpg)) +\n        geom_point(\n            aes(\n                color = hp,\n                alpha = after_scale(scales::rescale(as.numeric(factor(color)), to = c(0.3, 1)))\n            ),\n            size = 5\n        ) +\n        scale_color_viridis_c(option = \"magma\", end = 0.9) +\n        labs(\n            title = \"Using after_scale() for dynamic transparency\",\n            subtitle = \"Point transparency adjusted based on scaled color values\",\n            x = \"Weight (1000 lbs)\",\n            y = \"Miles per Gallon\",\n            color = \"Horsepower\"\n        ) +\n        theme_minimal(base_size = 14, base_family = \"roboto\") +\n        theme(\n            plot.title = element_text(face = \"bold\"),\n            panel.grid.minor = element_blank()\n        )\n    ```\n    \n    ::: {.cell-output-display}\n    ![](index_files/figure-html/unnamed-chunk-10-1.png){width=960}\n    :::\n    :::\n\n    \n    ::: \n\nThese are particularly useful when you want to create plots that depend on dynamic data or when you want to modify aesthetics based on user input in interactive applications. \n\n\n*This feature in `{ggplot2}` is available in version 3.5.0 and later.*\n\n# 7. Markdown within {ggplot2} text elements\n\nWhat I like about `{ggtext}` is the ability to use markdown syntax within `{ggplot2}` text elements, such as titles, subtitles, captions, and axis labels. This means you can easily format your text to include **bold**, *italic*, `code`, and even [links](https://ggplot2.tidyverse.org/) directly within your plots.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Click to see the code\"}\nbox::use(\n    ggtext[element_markdown], \n    dplyr[mutate], \n    tidyr[long = pivot_longer], \n    stringr[replace_all = str_replace_all, to_title = str_to_title]\n)\n\niris_colors = c(\n    setosa = \"#D83F87\",   \n    versicolor = \"#36E2A3\",   \n    virginica = \"#7B68EE\"    \n)\n\niris |>\n    mutate(\n        Species = factor(\n            Species,\n            levels = c(\"setosa\", \"versicolor\", \"virginica\"))\n    ) |>\n    long(\n        cols = where(is.numeric),\n        names_to  = \"features\",\n        values_to = \"sizes\"\n    ) |>\n    mutate(\n        features = to_title(replace_all(features, \"\\\\.\", \" \"))\n    ) |>\n    ggplot(aes(x = Species, y = sizes, color = Species, fill = Species)) +\n    geom_violin(alpha = 0.65, linewidth = 0.6) +                  \n    geom_boxplot(\n        width = 0.25, \n        outlier.alpha = 0,\n        linewidth = 0.6, \n        fill = \"white\"\n    ) +     \n    ggforce::geom_sina(\n        alpha = 0.5, \n        size = 2.2, \n        shape = 21,\n        color = \"gray20\", \n        stroke = 0.4\n    ) +\n    scale_color_manual(values = iris_colors) +\n    scale_fill_manual(values = iris_colors) +\n    scale_y_continuous(labels = scales::label_number(accuracy = 0.1)) +\n    facet_wrap(~ features, scales = \"free_y\", ncol = 2) +\n    labs(\n        title    = \"<b>Iris Dataset – Distribution of Measurements by Species</b>\",\n        subtitle = paste0(\n            \"Species: <span style='color:#D83F87;'>**setosa**</span> | \",\n            \"<span style='color:#36E2A3;'>**versicolor**</span> | \",\n            \"<span style='color:#7B68EE;'>**virginica**</span>\"\n        ),\n        x = NULL,\n        y = NULL\n    ) +\n    theme_classic(base_family = \"lobster\") +\n    theme(\n        plot.title = element_markdown(hjust = 0.5, size = 18),\n        plot.subtitle = element_markdown(\n            hjust = 0.5, size = 13, margin = margin(b = 20)\n        ),\n        strip.text = element_text(size = 13, face = \"bold\", color = \"gray30\"),\n        strip.background = element_rect(fill = \"gray95\", color = NA),\n        axis.text.x = element_blank(), # element_text(size = 12)\n        axis.text.y = element_text(size = 11),\n        axis.ticks.x = element_blank(),\n        panel.grid.major.y = element_line(color = \"gray88\", linewidth = 0.4),  \n        # panel.grid.minor.y = element_line(color = \"gray94\", linewidth = 0.25), \n        legend.position = \"none\"\n    )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=960}\n:::\n:::\n\n\nThe `element_markdown()` function replaces standard theme text elements and parses markdown/HTML. You can use:\n\n-  Markdown: `**bold**`, `*italic*`, `` `code` ``\n-  HTML tags: `<span>`, `<br>`, `<sup>`, `<sub>`, and more\n-  Inline CSS: `<span style='color:red;'>colored text</span>`\n\n# Resources\n\n-  [ggplot2 Official Documentation](https://ggplot2.tidyverse.org/)\n-  [ggplot2 Book by Hadley Wickham](https://ggplot2-book.org/)\n-  [ggplot2 GitHub Repository](https://github.com/tidyverse/ggplot2)\n-  [R Graphics Cookbook by Winston Chang](https://r-graphics.org/)\n-  [showtext Package Documentation](https://github.com/yixuan/showtext)\n-  [ggpattern Package](https://coolbutuseless.github.io/package/ggpattern/)\n-  [ggiraph Package](https://davidgohel.github.io/ggiraph/)\n-  [S7 OOP System](https://github.com/RConsortium/S7)\n-  [ggplot2 Extensions Gallery](https://exts.ggplot2.tidyverse.org/)\n-  [Cedric Scherer's ggplot2 Tutorials](https://www.cedricscherer.com/)\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/d3-bundle-5.16.0/d3-bundle.min.js\"></script>\n<script src=\"../../site_libs/d3-lasso-0.0.5/d3-lasso.min.js\"></script>\n<script src=\"../../site_libs/save-svg-as-png-1.4.17/save-svg-as-png.min.js\"></script>\n<script src=\"../../site_libs/flatbush-4.4.0/flatbush.min.js\"></script>\n<link href=\"../../site_libs/ggiraphjs-0.8.10/ggiraphjs.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/ggiraphjs-0.8.10/ggiraphjs.min.js\"></script>\n<script src=\"../../site_libs/girafe-binding-0.9.1/girafe.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}